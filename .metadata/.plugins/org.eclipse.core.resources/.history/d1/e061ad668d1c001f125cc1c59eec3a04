<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Quản lý người dùng</title>
    <link rel="stylesheet" href="/accountManagement/style.css" />
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>
<body>
    <div class="wrapper">
        <div class="top_navbar">
            <div class="hamburger">
                <div class="one"></div>
                <div class="two"></div>
                <div class="three"></div>
            </div>
            <div class="top_menu">
                <div class="logo">Wall-E</div>
                <form class="search">
                    <i class="fa fa-search"></i>
                    <input type="text" placeholder="Tìm kiếm lớp học, trung tâm, ...">
                    <button type="submit">Tìm</button>
                </form>
                <div class="profile-dropdown">
                    <div onclick="toggle()" class="profile-dropdown-btn">
                        <div class="profile-img">
                            <i class="fas fa-circle"></i>
                        </div>
                        <span>Victoria <i class="fas fa-angle-down"></i></span>
                    </div>
                    <ul class="profile-dropdown-list">
                        <li class="profile-dropdown-list-item"><a href="../profile/index.html"><i class="fas fa-user"></i>Thông tin cá nhân</a></li>
                        <li class="profile-dropdown-list-item"><a href="#"><i class="fas fa-bell"></i>Thông báo</a></li>
                        <li class="profile-dropdown-list-item"><a href="../changePassword/index.html"><i class="fas fa-lock"></i>Đổi mật khẩu</a></li>
                        <hr />
                        <li class="profile-dropdown-list-item"><a href="#"><i class="fas fa-sign-out-alt"></i>Đăng xuất</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <ul>
                <li><a href="/admin"><span class="icon"><i class="fas fa-home"></i></span><span class="title">Trang chủ</span></a></li>
                <li><a href="/profileadmin"><span class="icon"><i class="fas fa-user"></i></span><span class="title">Thông tin cá nhân</span></a></li>
                <li><a href="/accountManagement" class="active"><span class="icon"><i class="fas fa-clipboard-list"></i></span><span class="title">Quản lý người dùng</span></a></li>
                <li><a href="/notificationDetail"><span class="icon"><i class="fas fa-bell"></i></span><span class="title">Thông báo</span></a></li>
                <li><a href="/approveManagement"><span class="icon"><i class="fas fa-check"></i></span><span class="title">Duyệt bài</span></a></li>
            </ul>
        </div>

        <div class="main_container">
            <section id="content">
                <!-- MAIN -->
                <main>
                    <div class="head-title">
                        <div class="left">
                            <h1>Quản lý người dùng</h1>
                        </div>
                    </div>

                    <div class="table-data">
                        <div class="order">
                            <div class="head">
                                <h3>Danh sách người dùng</h3>
                                <div class="filter">
                                    <select name="roles" id="role">
                                        <option value="all">Tất cả</option>
                                        <option value="teacher">Giáo viên</option>
                                        <option value="student">Học sinh</option>
                                        <option value="parent">Phụ huynh</option>
                                        <option value="manager">Quản lý</option>
                                    </select>
                                </div>
                            </div>
                            <table id="user-account">
                                <thead>
                                    <tr>
                                        <th>Tên tài khoản</th>
                                        <th>Vai trò</th>
                                        <th>Trạng thái</th>
                                        <th>Khóa/Mở khóa</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Sử dụng Thymeleaf để lặp qua danh sách người dùng và hiển thị -->
                                    <tr th:each="user : ${users}">
                                        <td th:text="${user.C14_USER_USERNAME}">Tên tài khoản</td>
                                        <td th:text="${user.role.name}">Vai trò</td>
                                        <td th:text="${user.status ? 'Hoạt động' : 'Khóa'}">Trạng thái</td>
                                        <td>
                                            <form th:action="@{/admin/user/toggleStatus}" method="post">
                                                <input type="hidden" name="userId" th:value="${user.id}" />
                                                <button type="submit" th:text="${user.status ? 'Khóa' : 'Mở khóa'}"></button>
                                            </form>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </main>
            </section>
        </div>
    </div>

    <script src="script.js" type="module"></script>
    <script src="dropdown.js"></script>
</body>
</html>
